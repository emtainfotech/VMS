<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Profile - {{ employee.first_name }} {{ employee.last_name }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* A subtle background pattern */
        body {
            background-color: #f8fafc; /* slate-50 */
        }
        /* Styles for active tab navigation */
        .tab-link.active {
            background-color: #eef2ff; /* indigo-50 */
            color: #4f46e5; /* indigo-600 */
            font-weight: 600;
        }
        /* Smooth transition for tab panels */
        .tab-panel {
            transition: opacity 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-slate-50">

    <div class="container mx-auto p-4 md:p-8">
        <header class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
            <div>
                <h1 class="text-3xl font-bold text-slate-800">{{ employee.first_name }} {{ employee.last_name }}</h1>
                <p class="text-slate-500">
                    Employee Profile & Onboarding Data
                </p>
            </div>
            <div class="mt-4 md:mt-0 flex items-center space-x-2">
                 <span class="inline-flex items-center rounded-full px-3 py-1 text-sm font-medium {% if employee.onboarding_status == 'completed' %}bg-green-100 text-green-700{% else %}bg-yellow-100 text-yellow-700{% endif %}">
                    Status: {{ employee.get_onboarding_status_display }}
                </span>
                <button class="p-2 rounded-md hover:bg-slate-200 transition">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-slate-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" /></svg>
                </button>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            
            <aside class="lg:col-span-1">
                <div class="bg-white p-6 rounded-xl shadow-sm sticky top-8">
                    <div class="text-center">
                        <div class="w-24 h-24 rounded-full bg-slate-200 mx-auto flex items-center justify-center mb-4">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                        </div>
                        <h2 class="text-xl font-semibold text-slate-800">{{ employee.first_name }} {{ employee.last_name }}</h2>
                        <p class="text-slate-500">{{ employee.employee_id|default:"ID Not Assigned" }}</p>
                    </div>
                    <div class="mt-6 border-t border-slate-200 pt-6">
                        <dl class="space-y-4">
                            <div class="flex items-start space-x-3">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-slate-400 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                                <div class="text-sm">
                                    <dt class="font-medium text-slate-600">Email</dt>
                                    <dd class="text-slate-500">{{ employee.email }}</dd>
                                </div>
                            </div>
                            <div class="flex items-start space-x-3">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-slate-400 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" /></svg>
                                <div class="text-sm">
                                    <dt class="font-medium text-slate-600">Phone</dt>
                                    <dd class="text-slate-500">{{ employee.phone_number|default:"N/A" }}</dd>
                                </div>
                            </div>
                             <div class="flex items-start space-x-3">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-slate-400 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                                <div class="text-sm">
                                    <dt class="font-medium text-slate-600">Date of Joining</dt>
                                    <dd class="text-slate-500">{{ employee.date_of_joining|date:"F d, Y"|default:"N/A" }}</dd>
                                </div>
                            </div>
                        </dl>
                    </div>
                    <nav class="mt-6 border-t border-slate-200 pt-6">
                        <ul class="space-y-1">
                            <li><a href="#personal" data-tab="personal" class="tab-link active flex items-center px-3 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-100 transition"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg> Personal & Address</a></li>
                            <li><a href="#professional" data-tab="professional" class="tab-link flex items-center px-3 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-100 transition"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg> Professional</a></li>
                            <li><a href="#documents" data-tab="documents" class="tab-link flex items-center px-3 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-100 transition"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg> Documents</a></li>
                        </ul>
                    </nav>
                </div>
            </aside>

            <main class="lg:col-span-3">
                <div class="bg-white p-6 md:p-8 rounded-xl shadow-sm">
                    <div id="personal" class="tab-panel">
                        <section>
                            <h3 class="text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2 mb-4">Personal Details</h3>
                            <dl class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 text-sm">
                                <div><dt class="text-slate-500">Date of Birth</dt><dd class="text-slate-700 font-medium">{{ employee.date_of_birth|date:"F d, Y"|default:"N/A" }}</dd></div>
                                <div><dt class="text-slate-500">Gender</dt><dd class="text-slate-700 font-medium">{{ employee.get_gender_display|default:"N/A" }}</dd></div>
                                <div><dt class="text-slate-500">Marital Status</dt><dd class="text-slate-700 font-medium">{{ employee.get_marital_status_display|default:"N/A" }}</dd></div>
                                <div><dt class="text-slate-500">Number of Children</dt><dd class="text-slate-700 font-medium">{{ employee.number_of_children|default:"N/A" }}</dd></div>
                            </dl>
                        </section>
                        <section class="mt-8">
                            <h3 class="text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2 mb-4">Emergency Contact</h3>
                            {% if emergency_contact %}
                               <dl class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 text-sm">
                                <div><dt class="text-slate-500">Contact Name</dt><dd class="text-slate-700 font-medium">{{ emergency_contact.contact_name }}</dd></div>
                                <div><dt class="text-slate-500">Relationship</dt><dd class="text-slate-700 font-medium">{{ emergency_contact.relationship|default:"N/A" }}</dd></div>
                                <div><dt class="text-slate-500">Phone</dt><dd class="text-slate-700 font-medium">{{ emergency_contact.phone_number }}</dd></div>
                                <div><dt class="text-slate-500">Email</dt><dd class="text-slate-700 font-medium">{{ emergency_contact.email|default:"N/A" }}</dd></div>
                            </dl>
                            {% else %}<p class="text-sm text-slate-500">No emergency contact provided.</p>{% endif %}
                        </section>
                        <section class="mt-8">
                            <h3 class="text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2 mb-4">Address Information</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 text-sm">
                                <div>
                                    <h4 class="font-medium text-slate-600 mb-2">Current Address</h4>
                                    {% if current_address %}<address class="not-italic text-slate-500 leading-relaxed">{{ current_address.street_address }}<br>{{ current_address.city }}, {{ current_address.state }} {{ current_address.zip_code }}<br>{{ current_address.country }}</address>{% else %}<p class="text-slate-500">N/A</p>{% endif %}
                                </div>
                                <div>
                                    <h4 class="font-medium text-slate-600 mb-2">Permanent Address</h4>
                                     {% if permanent_address %}<address class="not-italic text-slate-500 leading-relaxed">{{ permanent_address.street_address }}<br>{{ permanent_address.city }}, {{ permanent_address.state }} {{ permanent_address.zip_code }}<br>{{ permanent_address.country }}</address>{% else %}<p class="text-slate-500">N/A</p>{% endif %}
                                </div>
                            </div>
                        </section>
                    </div>

                    <div id="professional" class="tab-panel hidden">
                         <section>
                            <h3 class="text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2 mb-4">Work Experience</h3>
                            <div class="space-y-6">
                                {% for exp in work_experience %}
                                <div class="relative pl-6 before:absolute before:left-0 before:top-2 before:w-1.5 before:h-1.5 before:bg-indigo-500 before:rounded-full">
                                    <p class="font-semibold text-slate-700">{{ exp.job_title }} at {{ exp.company_name }}</p>
                                    <p class="text-sm text-slate-500">{{ exp.start_date|date:"M Y" }} - {% if exp.currently_working %}Present{% else %}{{ exp.end_date|date:"M Y" }}{% endif %} | {{ exp.location|default:"N/A" }}</p>
                                    {% if exp.job_description %}<p class="text-sm text-slate-600 mt-2">{{ exp.job_description }}</p>{% endif %}
                                </div>
                                {% empty %}<p class="text-sm text-slate-500">No work experience provided.</p>{% endfor %}
                            </div>
                        </section>
                         <section class="mt-8">
                            <h3 class="text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2 mb-4">Education</h3>
                            <div class="space-y-6">
                                {% for edu in education_history %}
                                <div class="relative pl-6 before:absolute before:left-0 before:top-2 before:w-1.5 before:h-1.5 before:bg-indigo-500 before:rounded-full">
                                    <p class="font-semibold text-slate-700">{{ edu.degree }}, {{ edu.field_of_study }}</p>
                                    <p class="text-sm text-slate-500">{{ edu.institution }} | Graduated {{ edu.graduation_year }}</p>
                                    <p class="text-sm text-slate-500">Grade: {{ edu.grade|default:"N/A" }}</p>
                                </div>
                                {% empty %}<p class="text-sm text-slate-500">No education details provided.</p>{% endfor %}
                            </div>
                        </section>
                        <section class="mt-8">
                            <h3 class="text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2 mb-4">Skills & Notes</h3>
                            <dl class="text-sm">
                                <dt class="text-slate-500">Skills & Certifications</dt>
                                <dd class="text-slate-700 font-medium whitespace-pre-wrap">{{ employee.skills_certifications|default:"N/A" }}</dd>
                                <dt class="text-slate-500 mt-4">Additional Notes</dt>
                                <dd class="text-slate-700 font-medium whitespace-pre-wrap">{{ employee.additional_notes|default:"N/A" }}</dd>
                            </dl>
                        </section>
                    </div>

                    <div id="documents" class="tab-panel hidden">
                        <h3 class="text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2 mb-4">Uploaded Documents</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                            {% for doc in documents %}
                            <a href="{{ doc.document_file.url }}" target="_blank" class="block group">
                                <div class="bg-slate-50 border border-slate-200 p-4 rounded-lg flex items-center space-x-4 hover:bg-indigo-50 hover:border-indigo-200 transition">
                                    <div class="flex-shrink-0">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-slate-400 group-hover:text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm font-semibold text-slate-700 group-hover:text-indigo-700">{{ doc.get_document_type_display }}</p>
                                        <p class="text-xs text-slate-500">Click to view/download</p>
                                    </div>
                                </div>
                            </a>
                            {% empty %}
                            <p class="text-sm text-slate-500 sm:col-span-2 md:col-span-3">No documents were uploaded.</p>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const tabs = document.querySelectorAll('.tab-link');
            const panels = document.querySelectorAll('.tab-panel');

            tabs.forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();

                    // Deactivate all tabs and panels
                    tabs.forEach(item => item.classList.remove('active'));
                    panels.forEach(panel => panel.classList.add('hidden'));

                    // Activate clicked tab
                    tab.classList.add('active');
                    
                    // Activate corresponding panel
                    const targetPanelId = tab.getAttribute('data-tab');
                    const targetPanel = document.getElementById(targetPanelId);
                    if (targetPanel) {
                        targetPanel.classList.remove('hidden');
                    }
                });
            });
        });
    </script>
</body>
</html>